# GitClauder 階層化メモリシステム

このディレクトリには、人間の記憶のように階層化された会話レポートが保存されます。

## 階層構造

### priority-1.md（重要度1 - 最新・最重要）
- 最新のタスク履歴を記録
- **常に読み込まれる**
- 30KBを超えると古い半分が自動的に重要度2に移動

### priority-2.md（重要度2 - やや古い）
- 重要度1から移動された古いタスク
- **情報不足時に読み込まれる**
- 話がかみ合わない時の補助記憶

### priority-3.md（重要度3 - アーカイブ）
- 重要度2から移動された非常に古いタスク
- めったに使われないアーカイブ

## スマート読み込み

### 基本動作
1. デフォルトで重要度1のみ読み込む
2. タスク実行
3. 結果を分析

### 情報不足の検出
以下のキーワードが結果に含まれる場合、次回は重要度2も読み込む：
- 「わかりません」「情報が足りません」
- 「前に言った」「前に」「以前」
- エラー発生時

### 自動復帰
- 情報が十分な場合、次回は自動的に重要度1のみに戻る
- 人間の記憶と同じく、必要な時だけ深く掘り下げる

## memory-state.json
次回読み込むべき重要度レベルを記録
```json
{
  "nextPriorityLevel": 1
}
```

## SessionIDの役割

- **階層化メモリ**: 全タスクの履歴（SessionID関係なく全て記録）
- **SessionID**: Claude CLIの局所的な会話継続機能
  - 同じSessionIDを使うと、CLI側でも文脈が継続
  - 基本は自動生成、特定の話の続きをする場合のみ手動指定
